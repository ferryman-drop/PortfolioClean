# Система уровней портфеля

## Обзор

Система уровней портфеля автоматически корректирует лимиты категорий в зависимости от общей стоимости портфеля. Это помогает управлять рисками и обеспечивает более консервативный подход для крупных портфелей.

## Уровни портфеля

### Уровень 1: Новичок (0$ - 5,000$)
- **Лимиты:** Без изменений (базовые настройки)
- **Описание:** Стандартные лимиты для начинающих инвесторов
- **Рекомендации:** Идеально для изучения крипторынка

### Уровень 2: Начинающий (5,000$ - 10,000$)
- **Лимиты:** Снижены на 5%
- **Описание:** Небольшие ограничения для управления рисками
- **Рекомендации:** Подходит для инвесторов с базовым опытом

### Уровень 3: Средний (10,000$ - 20,000$)
- **Лимиты:** Снижены на 10%
- **Описание:** Умеренные ограничения для защиты капитала
- **Рекомендации:** Для опытных инвесторов с средним капиталом

### Уровень 4: Продвинутый (20,000$ - 50,000$)
- **Лимиты:** Снижены на 15%
- **Описание:** Значительные ограничения для крупных портфелей
- **Рекомендации:** Для серьезных инвесторов с крупным капиталом

### Уровень 5: Эксперт (50,000$ - 100,000$)
- **Лимиты:** Снижены на 20%
- **Описание:** Максимальные ограничения для защиты крупного капитала
- **Рекомендации:** Для профессиональных инвесторов

## Как работают ограничения

### Пример расчета

**Базовые лимиты:**
- BTC: 20% - 30%
- ETH & Blue Chips: 20% - 30%
- Stablecoins: 20% - 30%
- DeFi/Altcoins: 20% - 30%

**Для уровня 3 (снижение на 10%):**
- BTC: 18% - 27%
- ETH & Blue Chips: 18% - 27%
- Stablecoins: 18% - 27%
- DeFi/Altcoins: 18% - 27%

### Формула расчета
```
Новый лимит = Базовый лимит × (100 - Процент снижения) / 100
```

## Преимущества системы уровней

### 1. Автоматическое управление рисками
- Чем больше портфель, тем консервативнее подход
- Защита от чрезмерной концентрации в одной категории

### 2. Адаптивность
- Система автоматически подстраивается под размер портфеля
- Не требует ручной настройки

### 3. Прозрачность
- Четкие критерии для каждого уровня
- Видимый прогресс до следующего уровня

## Мониторинг и уведомления

### Отображение уровня
- Текущий уровень отображается в заголовке портфеля
- Прогресс-бар показывает продвижение к следующему уровню
- Информация о снижении лимитов

### Уведомления
- Автоматическое уведомление при переходе на новый уровень
- Информация о примененных ограничениях
- Рекомендации по управлению рисками

## Рекомендации по использованию

### Для начинающих (Уровни 1-2)
- Сосредоточьтесь на изучении рынка
- Используйте стандартные лимиты
- Постепенно увеличивайте диверсификацию

### Для опытных (Уровни 3-4)
- Обратите внимание на сниженные лимиты
- Рассмотрите более консервативные стратегии
- Увеличьте долю стейблкоинов

### Для экспертов (Уровень 5)
- Максимальная защита капитала
- Строгое соблюдение лимитов
- Рассмотрите дополнительные инструменты управления рисками

## Настройка и кастомизация

### Ручная настройка лимитов
- Возможность отключить автоматические ограничения
- Настройка индивидуальных лимитов для каждой категории
- Сохранение пользовательских пресетов

### Интеграция с другими функциями
- Синхронизация с системой ребалансировки
- Учет в аналитике и рекомендациях
- Влияние на расчет рисков

## Часто задаваемые вопросы

### Q: Можно ли отключить систему уровней?
A: Да, можно настроить лимиты вручную в разделе "Управление лимитами категорий".

### Q: Как часто обновляется уровень?
A: Уровень пересчитывается автоматически при каждом изменении стоимости портфеля.

### Q: Влияют ли уровни на рекомендации по ребалансировке?
A: Да, система учитывает сниженные лимиты при формировании рекомендаций.

### Q: Можно ли изменить критерии уровней?
A: В текущей версии критерии фиксированы, но планируется добавить возможность настройки.

## Техническая информация

### Алгоритм определения уровня
```typescript
function getPortfolioLevel(totalValue: number): PortfolioLevel {
  return PORTFOLIO_LEVELS.find(level => 
    totalValue >= level.minValue && totalValue < level.maxValue
  ) || PORTFOLIO_LEVELS[0];
}
```

### Применение ограничений
```typescript
function applyLevelReductions(baseLimits: CategoryLimit[], level: PortfolioLevel): CategoryLimit[] {
  if (level.limitReduction === 0) return baseLimits;
  
  const reductionMultiplier = (100 - level.limitReduction) / 100;
  return baseLimits.map(limit => ({
    ...limit,
    minPercentage: Math.max(0, limit.minPercentage * reductionMultiplier),
    maxPercentage: Math.min(100, limit.maxPercentage * reductionMultiplier)
  }));
}
```

## Заключение

Система уровней портфеля обеспечивает автоматическое управление рисками, адаптируясь к размеру портфеля. Это помогает инвесторам поддерживать сбалансированную структуру портфеля и защищать капитал по мере его роста. 